!function(t){var i={};function n(a){if(i[a])return i[a].exports;var e=i[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,n),e.l=!0,e.exports}n.m=t,n.c=i,n.d=function(t,i,a){n.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,i){if(1&i&&(t=n(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)n.d(a,e,function(i){return t[i]}.bind(null,e));return a},n.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(i,"a",i),i},n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},n.p="",n(n.s=0)}([function(t,i,n){var a=n(1),e=n(3);window.L.CanvasIconLayer=e(L),window.rbush=a},function(t,i,n){"use strict";t.exports=e,t.exports.default=e;var a=n(2);function e(t,i){if(!(this instanceof e))return new e(t,i);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&this._initFormat(i),this.clear()}function r(t,i,n){if(!n)return i.indexOf(t);for(var a=0;a<i.length;a++)if(n(t,i[a]))return a;return-1}function o(t,i){s(t,0,t.children.length,i,t)}function s(t,i,n,a,e){e||(e=_(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var r,o=i;o<n;o++)r=t.children[o],h(e,t.leaf?a(r):r);return e}function h(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function l(t,i){return t.minX-i.minX}function c(t,i){return t.minY-i.minY}function m(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function d(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function _(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(t,i,n,e,r){for(var o,s=[i,n];s.length;)(n=s.pop())-(i=s.pop())<=e||(o=i+Math.ceil((n-i)/e/2)*e,a(t,o,i,n,r),s.push(i,o,o,n))}e.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],a=this.toBBox;if(!d(t,i))return n;for(var e,r,o,s,h=[];i;){for(e=0,r=i.children.length;e<r;e++)o=i.children[e],d(t,s=i.leaf?a(o):o)&&(i.leaf?n.push(o):f(t,s)?this._all(o,n):h.push(o));i=h.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!d(t,i))return!1;for(var a,e,r,o,s=[];i;){for(a=0,e=i.children.length;a<e;a++)if(r=i.children[a],d(t,o=i.leaf?n(r):r)){if(i.leaf||f(t,o))return!0;s.push(r)}i=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var a=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var e=this.data;this.data=a,a=e}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=_([]),this},remove:function(t,i){if(!t)return this;for(var n,a,e,o,s=this.data,h=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),a=l[l.length-1],n=c.pop(),o=!0),s.leaf&&-1!==(e=r(t,s.children,i)))return s.children.splice(e,1),l.push(s),this._condense(l),this;o||s.leaf||!f(s,h)?a?(n++,s=a.children[n],o=!1):s=null:(l.push(s),c.push(n),n=0,a=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,a){var e,r=n-i+1,s=this._maxEntries;if(r<=s)return o(e=_(t.slice(i,n+1)),this.toBBox),e;a||(a=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,a-1))),(e=_([])).leaf=!1,e.height=a;var h,l,c,m,u=Math.ceil(r/s),f=u*Math.ceil(Math.sqrt(s));for(p(t,i,n,f,this.compareMinX),h=i;h<=n;h+=f)for(p(t,h,c=Math.min(h+f-1,n),u,this.compareMinY),l=h;l<=c;l+=u)m=Math.min(l+u-1,c),e.children.push(this._build(t,l,m,a-1));return o(e,this.toBBox),e},_chooseSubtree:function(t,i,n,a){for(var e,r,o,s,h,l,c,u,f,d;a.push(i),!i.leaf&&a.length-1!==n;){for(c=u=1/0,e=0,r=i.children.length;e<r;e++)h=m(o=i.children[e]),f=t,d=o,(l=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-h)<u?(u=l,c=h<c?h:c,s=o):l===u&&h<c&&(c=h,s=o);i=s||i.children[0]}return i},_insert:function(t,i,n){var a=this.toBBox,e=n?t:a(t),r=[],o=this._chooseSubtree(e,this.data,i,r);for(o.children.push(t),h(o,e);i>=0&&r[i].children.length>this._maxEntries;)this._split(r,i),i--;this._adjustParentBBoxes(e,r,i)},_split:function(t,i){var n=t[i],a=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,a);var r=this._chooseSplitIndex(n,e,a),s=_(n.children.splice(r,n.children.length-r));s.height=n.height,s.leaf=n.leaf,o(n,this.toBBox),o(s,this.toBBox),i?t[i-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,i){this.data=_([t,i]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var a,e,r,o,h,l,c,u,f,d,_,p,g,x;for(l=c=1/0,a=i;a<=n-i;a++)e=s(t,0,a,this.toBBox),r=s(t,a,n,this.toBBox),f=e,d=r,void 0,void 0,void 0,void 0,_=Math.max(f.minX,d.minX),p=Math.max(f.minY,d.minY),g=Math.min(f.maxX,d.maxX),x=Math.min(f.maxY,d.maxY),o=Math.max(0,g-_)*Math.max(0,x-p),h=m(e)+m(r),o<l?(l=o,u=a,c=h<c?h:c):o===l&&h<c&&(c=h,u=a);return u},_chooseSplitAxis:function(t,i,n){var a=t.leaf?this.compareMinX:l,e=t.leaf?this.compareMinY:c;this._allDistMargin(t,i,n,a)<this._allDistMargin(t,i,n,e)&&t.children.sort(a)},_allDistMargin:function(t,i,n,a){t.children.sort(a);var e,r,o=this.toBBox,l=s(t,0,i,o),c=s(t,n-i,n,o),m=u(l)+u(c);for(e=i;e<n-i;e++)r=t.children[e],h(l,t.leaf?o(r):r),m+=u(l);for(e=n-i-1;e>=i;e--)r=t.children[e],h(c,t.leaf?o(r):r),m+=u(c);return m},_adjustParentBBoxes:function(t,i,n){for(var a=n;a>=0;a--)h(i[a],t)},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():o(t[n],this.toBBox)},_initFormat:function(t){var i=["return a"," - b",";"];this.compareMinX=new Function("a","b",i.join(t[0])),this.compareMinY=new Function("a","b",i.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,i,n){t.exports=function(){"use strict";function t(t,i,n){var a=t[i];t[i]=t[n],t[n]=a}function i(t,i){return t<i?-1:t>i?1:0}return function(n,a,e,r,o){!function i(n,a,e,r,o){for(;r>e;){if(r-e>600){var s=r-e+1,h=a-e+1,l=Math.log(s),c=.5*Math.exp(2*l/3),m=.5*Math.sqrt(l*c*(s-c)/s)*(h-s/2<0?-1:1),u=Math.max(e,Math.floor(a-h*c/s+m)),f=Math.min(r,Math.floor(a+(s-h)*c/s+m));i(n,a,u,f,o)}var d=n[a],_=e,p=r;for(t(n,e,a),o(n[r],d)>0&&t(n,e,r);_<p;){for(t(n,_,p),_++,p--;o(n[_],d)<0;)_++;for(;o(n[p],d)>0;)p--}0===o(n[e],d)?t(n,e,p):t(n,++p,r),p<=a&&(e=p+1),a<=p&&(r=p-1)}}(n,a,e||0,r||n.length-1,o||i)}}()},function(t,i,n){"use strict";t.exports=function(t){var i=(t.Layer?t.Layer:t.Class).extend({initialize:function(i){t.setOptions(this,i),this._onClickListeners=[],this._onHoverListeners=[]},setOptions:function(i){return t.setOptions(this,i),this.redraw()},redraw:function(){this._redraw(!0)},addMarkers:function(t){var i=this,n=[],a=[];t.forEach(function(t){if("markerPane"==t.options.pane&&t.options.icon){var e=t.getLatLng(),r=i._map.getBounds().contains(e),o=i._addMarker(t,e,r);!0===r&&n.push(o[0]),a.push(o[1])}else console.error("Layer isn't a marker")}),i._markers.load(n),i._latlngMarkers.load(a)},addMarker:function(t){var i=t.getLatLng(),n=this._map.getBounds().contains(i),a=this._addMarker(t,i,n);!0===n&&this._markers.insert(a[0]),this._latlngMarkers.insert(a[1])},addLayer:function(t){"markerPane"==t.options.pane&&t.options.icon?this.addMarker(t):console.error("Layer isn't a marker")},addLayers:function(t){this.addMarkers(t)},removeLayer:function(t){this.removeMarker(t,!0)},removeMarker:function(t,i){t.minX&&(t=t.data);var n=t.getLatLng(),a=this._map.getBounds().contains(n),e={minX:n.lng,minY:n.lat,maxX:n.lng,maxY:n.lat,data:t};this._latlngMarkers.remove(e,function(t,i){return t.data._leaflet_id===i.data._leaflet_id}),this._latlngMarkers.total--,this._latlngMarkers.dirty++,!0===a&&!0===i&&this._redraw(!0)},onAdd:function(i){this._map=i,this._canvas||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._canvas):i._panes.overlayPane.appendChild(this._canvas),i.on("moveend",this._reset,this),i.on("resize",this._resize,this),i.on("click",this._executeListeners,this),i.on("mousemove",this._executeListeners,this),i.options.zoomAnimation&&t.Browser.any3d&&i.on("zoomanim",this._animateZoom,this)},onRemove:function(t){this.options.pane?this.getPane().removeChild(this._canvas):t.getPanes().overlayPane.removeChild(this._canvas),t.off("click",this._executeListeners,this),t.off("mousemove",this._executeListeners,this),t.off("moveend",this._reset,this),t.off("resize",this._resize,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},clearLayers:function(){this._latlngMarkers=null,this._markers=null,this._redraw(!0)},_addMarker:function(i,n,a){i._map=this._map,this._markers||(this._markers=new rbush),this._latlngMarkers||(this._latlngMarkers=new rbush,this._latlngMarkers.dirty=0,this._latlngMarkers.total=0),t.Util.stamp(i);var e=this._map.latLngToContainerPoint(n),r=i.options.icon.options.iconSize,o=r[0]/2,s=r[1]/2,h=[{minX:e.x-o,minY:e.y-s,maxX:e.x+o,maxY:e.y+s,data:i},{minX:n.lng,minY:n.lat,maxX:n.lng,maxY:n.lat,data:i}];return this._latlngMarkers.dirty++,this._latlngMarkers.total++,!0===a&&this._drawMarker(i,e),h},_drawMarker:function(t,i){var n=this;this._imageLookup||(this._imageLookup={}),i||(i=n._map.latLngToContainerPoint(t.getLatLng()));var a=t.options.icon.options.iconUrl;if(t.canvas_img)n._drawImage(t,i);else if(n._imageLookup[a])t.canvas_img=n._imageLookup[a][0],!1===n._imageLookup[a][1]?n._imageLookup[a][2].push([t,i]):n._drawImage(t,i);else{var e=new Image;e.src=a,t.canvas_img=e,n._imageLookup[a]=[e,!1,[[t,i]]],e.onload=function(){n._imageLookup[a][1]=!0,n._imageLookup[a][2].forEach(function(t){n._drawImage(t[0],t[1])})}}},_drawImage:function(t,i){var n=t.options.icon.options;const a=n.rotation||0;n.iconSize[0],n.iconSize[1],this._context.translate(i.x,i.y),this._context.rotate(a),this._context.drawImage(t.canvas_img,0,0,n.iconSize[0],n.iconSize[1]),this._context.rotate(-a),this._context.translate(-i.x,-i.y)},_resize:function(t){this._canvas.width=t.newSize.x,this._canvas.height=t.newSize.y},_reset:function(){var i=this._map.containerPointToLayerPoint([0,0]);t.DomUtil.setPosition(this._canvas,i);var n=this._map.getSize();this._canvas.width=n.x,this._canvas.height=n.y,this._redraw()},_redraw:function(t){var i=this;if(t&&this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._map&&this._latlngMarkers){var n=[];i._latlngMarkers.dirty/i._latlngMarkers.total>=.1&&(i._latlngMarkers.all().forEach(function(t){n.push(t)}),i._latlngMarkers.clear(),i._latlngMarkers.load(n),i._latlngMarkers.dirty=0,n=[]);var a=i._map.getBounds(),e={minX:a.getWest(),minY:a.getSouth(),maxX:a.getEast(),maxY:a.getNorth()};i._latlngMarkers.search(e).forEach(function(t){var a=i._map.latLngToContainerPoint(t.data.getLatLng()),e=t.data.options.icon.options.iconSize,r=e[0]/2,o=e[1]/2,s={minX:a.x-r,minY:a.y-o,maxX:a.x+r,maxY:a.y+o,data:t.data};n.push(s),i._drawMarker(t.data,a)}),this._markers.clear(),this._markers.load(n)}},_initCanvas:function(){this._canvas=t.DomUtil.create("canvas","leaflet-canvas-icon-layer leaflet-layer");var i=t.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this._canvas.style[i]="50% 50%";var n=this._map.getSize();this._canvas.width=n.x,this._canvas.height=n.y,this._context=this._canvas.getContext("2d");var a=this._map.options.zoomAnimation&&t.Browser.any3d;t.DomUtil.addClass(this._canvas,"leaflet-zoom-"+(a?"animated":"hide"))},addOnClickListener:function(t){this._onClickListeners.push(t)},addOnHoverListener:function(t){this._onHoverListeners.push(t)},_executeListeners:function(t){if(this._markers){var i=this,n=t.containerPoint.x,a=t.containerPoint.y;i._openToolTip&&(i._openToolTip.closeTooltip(),delete i._openToolTip);var e=this._markers.search({minX:n,minY:a,maxX:n,maxY:a});e&&e.length>0?(i._map._container.style.cursor="pointer","click"===t.type&&(e[0].data.getPopup()&&e[0].data.openPopup(),i._onClickListeners.forEach(function(i){i(t,e)})),"mousemove"===t.type&&(e[0].data.getTooltip()&&(i._openToolTip=e[0].data,e[0].data.openTooltip()),i._onHoverListeners.forEach(function(i){i(t,e)}))):i._map._container.style.cursor=""}},_animateZoom:function(i){var n=this._map.getZoomScale(i.zoom),a=this._map._getCenterOffset(i.center)._multiplyBy(-n).subtract(this._map._getMapPanePos());t.DomUtil.setTransform(this._canvas,a,n)}});t.canvasIconLayer=function(t){return new i(t)}}}]);